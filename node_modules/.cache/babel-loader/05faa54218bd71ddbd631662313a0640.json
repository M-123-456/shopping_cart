{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback } from 'react';\nexport const useAvailability = () => {\n  _s();\n\n  const [isAvailable, setIsAvailable] = useState(true);\n  const [message, setMessage] = useState('');\n  const checkAvailability = useCallback(params => {\n    let quantityOrdered = 0;\n    let product = params.currentProduct || params.editProduct; // asign quantity in shoppingCart as quantityOrdered\n\n    const productInShoppingCart = params.shoppingCart.find(item => item.productId === (product === null || product === void 0 ? void 0 : product.productId));\n\n    if (productInShoppingCart) {\n      quantityOrdered += productInShoppingCart.quantity;\n    } // if currenProduct is checked (SingleProduct), add quantity of currentProduct \n\n\n    if (params.currentProduct) {\n      quantityOrdered += params.currentProduct.quantity;\n    } // if ordered quantity is higher than the stock quantity, set NOT available and give message\n\n\n    if (!(params.article.quantity - quantityOrdered >= 0)) {\n      setIsAvailable(false);\n      setMessage('Product not on stock');\n    } else {\n      setIsAvailable(true);\n      setMessage('');\n    }\n  }, [isAvailable, message]);\n  return {\n    isAvailable,\n    message,\n    checkAvailability\n  };\n};\n\n_s(useAvailability, \"ZWHElaCa2yjyagHL8WnXJboRzOo=\");","map":{"version":3,"names":["useState","useCallback","useAvailability","isAvailable","setIsAvailable","message","setMessage","checkAvailability","params","quantityOrdered","product","currentProduct","editProduct","productInShoppingCart","shoppingCart","find","item","productId","quantity","article"],"sources":["/home/user/Documents/D01_JS/SPA/react/exercises/react_store03_shopping-cart-M-123-456/src/hooks/useAvailability.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nimport { IProductInCart } from '../types/products/IProductInCart';\nimport { IProduct } from '../types/products/IProduct';\n\ninterface IParams {\n    currentProduct?:  IProductInCart;\n    editProduct?: IProductInCart;\n    article: IProduct | undefined;\n    shoppingCart: IProductInCart[] | [];\n}\n\nexport const useAvailability = () => {\n    const [isAvailable, setIsAvailable] = useState(true);\n    const [message, setMessage] = useState('');\n\n    const checkAvailability = useCallback(( params: IParams ) => {\n        \n        let quantityOrdered: number = 0;\n        let product: IProductInCart | undefined = params.currentProduct || params.editProduct;\n\n        // asign quantity in shoppingCart as quantityOrdered\n        const productInShoppingCart = params.shoppingCart.find(item => item.productId === product?.productId);\n        if (productInShoppingCart) {\n            quantityOrdered += productInShoppingCart.quantity\n        }\n    \n        // if currenProduct is checked (SingleProduct), add quantity of currentProduct \n        if(params.currentProduct) {\n            quantityOrdered += params.currentProduct.quantity\n        }  \n\n        // if ordered quantity is higher than the stock quantity, set NOT available and give message\n        if(!((params.article!.quantity - quantityOrdered) >= 0)) {\n            setIsAvailable(false);\n            setMessage('Product not on stock');\n        } else {\n            setIsAvailable(true);\n            setMessage('');\n        }\n    },[isAvailable, message])\n\n    return { isAvailable, message, checkAvailability}\n}"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AAYA,OAAO,MAAMC,eAAe,GAAG,MAAM;EAAA;;EACjC,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCJ,QAAQ,CAAC,IAAD,CAA9C;EACA,MAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,EAAD,CAAtC;EAEA,MAAMO,iBAAiB,GAAGN,WAAW,CAAGO,MAAF,IAAuB;IAEzD,IAAIC,eAAuB,GAAG,CAA9B;IACA,IAAIC,OAAmC,GAAGF,MAAM,CAACG,cAAP,IAAyBH,MAAM,CAACI,WAA1E,CAHyD,CAKzD;;IACA,MAAMC,qBAAqB,GAAGL,MAAM,CAACM,YAAP,CAAoBC,IAApB,CAAyBC,IAAI,IAAIA,IAAI,CAACC,SAAL,MAAmBP,OAAnB,aAAmBA,OAAnB,uBAAmBA,OAAO,CAAEO,SAA5B,CAAjC,CAA9B;;IACA,IAAIJ,qBAAJ,EAA2B;MACvBJ,eAAe,IAAII,qBAAqB,CAACK,QAAzC;IACH,CATwD,CAWzD;;;IACA,IAAGV,MAAM,CAACG,cAAV,EAA0B;MACtBF,eAAe,IAAID,MAAM,CAACG,cAAP,CAAsBO,QAAzC;IACH,CAdwD,CAgBzD;;;IACA,IAAG,EAAGV,MAAM,CAACW,OAAP,CAAgBD,QAAhB,GAA2BT,eAA5B,IAAgD,CAAlD,CAAH,EAAyD;MACrDL,cAAc,CAAC,KAAD,CAAd;MACAE,UAAU,CAAC,sBAAD,CAAV;IACH,CAHD,MAGO;MACHF,cAAc,CAAC,IAAD,CAAd;MACAE,UAAU,CAAC,EAAD,CAAV;IACH;EACJ,CAxBoC,EAwBnC,CAACH,WAAD,EAAcE,OAAd,CAxBmC,CAArC;EA0BA,OAAO;IAAEF,WAAF;IAAeE,OAAf;IAAwBE;EAAxB,CAAP;AACH,CA/BM;;GAAML,e"},"metadata":{},"sourceType":"module"}